@import './variables';
@import './colors';

.voucher-versions {
    margin-right: 320px;
    padding: map-get($spacing, 'xl');
    min-height: 100vh;
    background-color: var(--bg-color);

    .header {
        @include flex(row, space-between, center);
        margin-bottom: map-get($spacing, 'xl');
        gap: map-get($spacing, 'md');

        .back-btn {
            @include flex(row, center, center);
            gap: map-get($spacing, 'sm');
            padding: map-get($spacing, 'sm') map-get($spacing, 'lg');
            background-color: var(--borders-color);
            color: var(--normal-text-color);
            border-radius: map-get($border-radius, 'md');
            transition: all map-get($transitions, 'fast');

            &:hover {
                background-color: var(--normal-text-color);
                color: var(--bg-color);
            }

            svg {
                font-size: map-get($font-sizes, 'sm');
            }
        }

        .title {
            @include flex(column, center, center);
            text-align: center;

            h1 {
                color: var(--dark-text-color);
                margin-bottom: map-get($spacing, 'xs');
            }

            p {
                color: var(--light-text-color);
            }
        }

        .create-btn {
            @include flex(row, center, center);
            gap: map-get($spacing, 'sm');
            padding: map-get($spacing, 'sm') map-get($spacing, 'lg');
            background-color: var(--primary-color);
            color: white;
            border-radius: map-get($border-radius, 'md');
            transition: all map-get($transitions, 'fast');

            &:hover {
                transform: translateY(-2px);
                box-shadow: map-get($shadows, 'md');
            }

            svg {
                font-size: map-get($font-sizes, 'lg');
            }
        }
    }

    .versions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: map-get($spacing, 'lg');

        .version-card {
            background-color: var(--side-bar-color);
            border-radius: map-get($border-radius, 'lg');
            padding: map-get($spacing, 'lg');
            border: 1px solid var(--borders-color);
            transition: all map-get($transitions, 'fast');
            position: relative;
            overflow: hidden;

            &::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 4px;
                background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            }

            &:hover {
                transform: translateY(-4px);
                box-shadow: map-get($shadows, 'lg');
            }

            .version-info {
                margin-bottom: map-get($spacing, 'lg');

                h3 {
                    color: var(--dark-text-color);
                    margin-bottom: map-get($spacing, 'sm');
                    font-size: map-get($font-sizes, 'lg');
                }

                p {
                    color: var(--normal-text-color);
                    font-size: map-get($font-sizes, 'normal');
                    margin-bottom: map-get($spacing, 'xs');
                }

                .voucher-count {
                    color: var(--primary-color);
                    font-weight: map-get($font-weights, 'semibold');
                    font-size: map-get($font-sizes, 'sm');
                }
            }

            .actions {
                @include flex(row, flex-end, center);

                .show-btn {
                    @include flex(row, center, center);
                    gap: map-get($spacing, 'sm');
                    padding: map-get($spacing, 'sm') map-get($spacing, 'lg');
                    background-color: var(--primary-color);
                    color: white;
                    border-radius: map-get($border-radius, 'md');
                    transition: all map-get($transitions, 'fast');

                    &:hover {
                        transform: translateY(-2px);
                        box-shadow: map-get($shadows, 'md');
                    }

                    svg {
                        font-size: map-get($font-sizes, 'sm');
                    }
                }
            }
        }
    }

    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        @include flex(row, center, center);
        z-index: map-get($z-index, 'modal');
        opacity: 0;
        visibility: hidden;
        transition: all map-get($transitions, 'normal');

        &.show {
            opacity: 1;
            visibility: visible;

            .modal-content {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content {
            background-color: var(--side-bar-color);
            border-radius: map-get($border-radius, 'lg');
            padding: map-get($spacing, 'xl');
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            transform: translateY(-20px);
            opacity: 0;
            transition: all map-get($transitions, 'normal');
            overflow-y: auto;
            scrollbar-width: thin;
            
            &::-webkit-scrollbar {
                width: 6px;
            }
            
            &::-webkit-scrollbar-track {
                background: var(--bg-color);
            }
            
            &::-webkit-scrollbar-thumb {
                background-color: var(--borders-color);
                border-radius: map-get($border-radius, 'pill');
            }

            h2 {
                color: var(--dark-text-color);
                margin-bottom: map-get($spacing, 'lg');
                text-align: center;
            }

            .search-box {
                margin-bottom: map-get($spacing, 'lg');
                
                input {
                    width: 100%;
                    height: 44px;
                    padding: 0 map-get($spacing, 'md');
                    border: 2px solid var(--borders-color);
                    border-radius: map-get($border-radius, 'md');
                    background-color: var(--bg-color);
                    color: var(--normal-text-color);
                    transition: all map-get($transitions, 'fast');
                    font-size: map-get($font-sizes, 'normal');

                    &::placeholder {
                        color: var(--light-text-color);
                    }

                    &:focus {
                        border-color: var(--primary-color);
                        box-shadow: 0 0 0 3px var(--secondary-color);
                    }
                }
            }

            .input-group {
                margin-bottom: map-get($spacing, 'lg');

                label {
                    display: block;
                    margin-bottom: map-get($spacing, 'xs');
                    color: var(--normal-text-color);
                }

                input {
                    width: 100%;
                    height: 44px;
                    border: 2px solid var(--borders-color);
                    border-radius: map-get($border-radius, 'md');
                    padding: 0 map-get($spacing, 'md');
                    background-color: var(--bg-color);
                    color: var(--normal-text-color);
                    transition: all map-get($transitions, 'fast');

                    &:focus {
                        border-color: var(--primary-color);
                        box-shadow: 0 0 0 3px var(--secondary-color);
                    }
                }
            }

            .buttons {
                @include flex(row, flex-end, center);
                gap: map-get($spacing, 'sm');
                margin-top: map-get($spacing, 'lg');
                padding-top: map-get($spacing, 'md');
                border-top: 1px solid var(--borders-color);

                .cancel {
                    padding: map-get($spacing, 'sm') map-get($spacing, 'xl');
                    font-weight: map-get($font-weights, 'medium');
                    transition: all map-get($transitions, 'fast');

                    &:hover {
                        background-color: var(--borders-color);
                        color: var(--dark-text-color);
                    }
                }

                button {
                    padding: map-get($spacing, 'sm') map-get($spacing, 'lg');
                    border-radius: map-get($border-radius, 'md');
                    transition: all map-get($transitions, 'fast');

                    &.cancel {
                        color: var(--normal-text-color);
                        background-color: transparent;
                        border: 1px solid var(--borders-color);

                        &:hover {
                            background-color: var(--borders-color);
                        }
                    }

                    &.create {
                        color: white;
                        background-color: var(--primary-color);

                        &:hover {
                            transform: translateY(-2px);
                            box-shadow: map-get($shadows, 'md');
                        }
                    }
                }
            }
        }
    }

    .loading, .error {
        @include flex(row, center, center);
        min-height: 400px;
        font-size: map-get($font-sizes, 'lg');
        color: var(--normal-text-color);
    }

    .error {
        color: var(--danger-color);
    }

    .table-container {
        margin: map-get($spacing, 'lg') (-#{map-get($spacing, 'xl')});
        overflow-x: auto;
        
        &::-webkit-scrollbar {
            height: 6px;
        }
        
        &::-webkit-scrollbar-track {
            background: var(--bg-color);
        }
        
        &::-webkit-scrollbar-thumb {
            background-color: var(--borders-color);
            border-radius: map-get($border-radius, 'pill');
        }

        .vouchers-table {
            width: 100%;
            min-width: 600px;
            border-collapse: collapse;

            th, td {
                padding: map-get($spacing, 'md');
                text-align: right;
                border-bottom: 1px solid var(--borders-color);
                white-space: nowrap;
            }

            tbody tr {
                transition: background-color map-get($transitions, 'fast');

                &:hover {
                    background-color: var(--bg-color);
                }
            }
        }
    }

        th {
            color: var(--dark-text-color);
            font-weight: map-get($font-weights, 'semibold');
            background-color: var(--bg-color);
        }

        td {
            color: var(--normal-text-color);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-left: map-get($spacing, 'xs');

            &.used {
                background-color: var(--danger-color);
            }

            &.available {
                background-color: var(--success-color);
            }
        }

        .table-actions {
            @include flex(row, flex-end, center);
            gap: map-get($spacing, 'sm');
            margin-top: map-get($spacing, 'md');

            .download-btn {
                @include flex(row, center, center);
                gap: map-get($spacing, 'xs');
                padding: map-get($spacing, 'sm') map-get($spacing, 'lg');
                background-color: var(--primary-color);
                color: white;
                border-radius: map-get($border-radius, 'md');
                transition: all map-get($transitions, 'fast');

                &:hover {
                    transform: translateY(-2px);
                    box-shadow: map-get($shadows, 'md');
                }

                svg {
                    font-size: map-get($font-sizes, 'sm');
                }
            }
        }
    }

@include responsive('lg') {
    .voucher-versions {
        margin-right: 300px;
        padding: map-get($spacing, 'lg');
    }
}

@include responsive('md') {
    .voucher-versions {
        margin-right: 0;
        padding: map-get($spacing, 'md');

        .header {
            flex-direction: column;
            gap: map-get($spacing, 'md');

            .title {
                order: -1;
            }
        }

        .versions-grid {
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
    }
}

@include responsive('sm') {
    .voucher-versions {
        margin-right: 0;
        padding: map-get($spacing, 'sm');

        .versions-grid {
            grid-template-columns: 1fr;
        }

        .create-modal .modal-content {
            margin: map-get($spacing, 'xs');
            padding: map-get($spacing, 'md');
        }
    }
}